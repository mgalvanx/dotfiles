#!/bin/sh

set -x 

choice=$(lsblk -l --output NAME,TYPE,FSTYPE,SIZE,PATH | grep -e 'sdb' -e 'mmc'| grep 'part'| dmenu -p "Which usb device do you want to mount?:" -l 10)

test ! -z "$1"  && exit 1

usbpath="${choice##* }"
mntpath=/mnt/${choice%% *}


if findmnt "${usbpath}";then
notify-send ""${mntpath}" is already mounted"
exit 1
  # exec "${TERMINAL}" -e  cd "${mntpath}"; "${SHELL}" -l
fi

sudo mkdir -p "${mntpath}" || true
sudo mount "${usbpath}" ${mntpath} 
# exec "${TERMINAL}" -e lsmount
# sleep 1
# xdotool search --name "${usbpath}" type cd ${mntpath}
  # type ls 
  # key enter
notify-send "Usb has been mounted to "${mntpath}""

