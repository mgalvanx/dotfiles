#!/bin/sh

browser="$1";shift
search_engine="$1";shift
query="$*"

case $browser in
  w3m) browser=w3m ;;
  lynx) browser=lynx ;;
  firefox) browser=firefox ;;
esac

case $search_engine in
  google) search_engine=https://www.google.com/search?q= ;;
  brave) search_engine=https://search.brave.com/search?q= ;;
  duck) search_engine=https://duckduckgo.com/lite?kd=-1\&kp=-1\&q= ;;
esac


if $browser -eq w3m -a $search_engine -eq $search_engine; then
    search_engine=https://duckduckgo.com/lite?kd=-1&kp=-1&q=
    query=$(urlencode "$query")
fi

#search_engine=https://duckduckgo.com/lite?kd=-1&kp=-1&q=

if test -n "$TMUX"; then
  tmux new-window -n "$browser"
	tmux send-keys "\"$browser\" \"${search_engine}${query}\" && tmux kill-window" Enter
	return 0
fi

#exec w3m "duckduckgo.com/lite?kd=-1&kp=-1&q=$*"
# chat "ðŸ¦† searching: $* $url"
#exec lynx "$url"
#exec lynx "duckduckgo.com/lite?q=$*" # ðŸ¦†
exec "$browser" "${search_engine}${query}"
