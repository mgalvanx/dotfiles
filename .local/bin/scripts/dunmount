#!/bin/sh

set -x

# choice=$(findmnt -l | grep "/mnt" |  dmenu -p "Which usb device do you want to unmount?" -l 10)
choice=$(lsblk -l --output NAME,TYPE,FSTYPE,SIZE,MOUNTPOINTS | grep '/mnt' | dmenu -p "Which usb device do you want to unmount?" -l 10)
test ! -z "$1"  && exit 1
    
devpath=/dev/"${choice##*/}"
mntpath=/mnt/"${choice##*/}"

sudo umount "${devpath}"
sudo rmdir "${mntpath}"
notify-send ""${devpath}" is unmounted"
